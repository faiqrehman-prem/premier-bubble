!function(){"use strict";if(window.NovaAgentEmbedLoaded)return;window.NovaAgentEmbedLoaded=!0;const n=window.NOVA_AGENT_URL||window.location.origin;let t={isAuthorized:null,isLoading:!0,isModalOpen:!1,bubble:null,modal:null};function o(n,t){for(const o in t)n.style[o]=t[o]}function e(){if(t.bubble)if(t.isLoading){if(t.bubble.innerHTML='\n        <div style="display: flex; align-items: center; justify-content: center;">\n          <div style="\n            width: 24px; \n            height: 24px; \n            border: 3px solid rgba(255, 255, 255, 0.3);\n            border-top: 3px solid #fff;\n            border-radius: 50%;\n            animation: nova-spin 1s linear infinite;\n          "></div>\n        </div>\n      ',!document.getElementById("nova-agent-styles")){const n=document.createElement("style");n.id="nova-agent-styles",n.textContent="\n          @keyframes nova-spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n          #nova-agent-bubble:hover {\n            transform: scale(1.1) !important;\n          }\n        ",document.head.appendChild(n)}}else t.isAuthorized?(t.bubble.innerHTML='<span style="font-size: 28px;">üìû</span>',t.bubble.style.cursor="pointer"):(t.bubble.innerHTML='<span style="font-size: 20px; color: #fff;">‚ùå</span>',t.bubble.style.cursor="not-allowed",t.bubble.style.background="linear-gradient(135deg, #ef4444 0%, #dc2626 100%)")}function i(){t.modal&&t.isAuthorized&&(t.isModalOpen=!0,t.modal.style.display="block",requestAnimationFrame(()=>{t.modal.style.transform="translateY(0) scale(1)",t.modal.style.opacity="1"}),t.bubble.style.opacity="0.3",t.bubble.style.transform="scale(0.8)")}function a(){t.modal&&(t.isModalOpen=!1,t.modal.style.transform="translateY(20px) scale(0.95)",t.modal.style.opacity="0",setTimeout(()=>{t.modal.style.display="none"},300),t.bubble.style.opacity="1",t.bubble.style.transform="scale(1)")}async function r(){const r=function(){const n=document.createElement("div");return n.id="nova-agent-bubble",o(n,{position:"fixed",right:"24px",bottom:"24px",width:"60px",height:"60px",borderRadius:"50%",background:"#000000",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15), 0 4px 8px rgba(0, 0, 0, 0.1)",cursor:"pointer",zIndex:"2147483646",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"3px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(8px)"}),n.addEventListener("mouseenter",function(){n.style.transform="scale(1.1)",n.style.boxShadow="0 12px 32px rgba(0, 0, 0, 0.2), 0 6px 12px rgba(0, 0, 0, 0.15)"}),n.addEventListener("mouseleave",function(){n.style.transform="scale(1)",n.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.15), 0 4px 8px rgba(0, 0, 0, 0.1)"}),t.bubble=n,n}();e(),document.body.appendChild(r),t.isAuthorized=!0,t.isLoading=!1,e();const s=function(){const e=document.createElement("iframe");return e.id="nova-agent-modal",e.src=n+"/index.html?embed=1",e.allow="microphone *; camera *; autoplay *",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms allow-popups"),o(e,{position:"fixed",right:"24px",bottom:"96px",width:"420px",height:"640px",border:"0",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.2), 0 8px 24px rgba(0, 0, 0, 0.1)",display:"none",zIndex:"2147483647",background:"#fff",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:"translateY(20px) scale(0.95)",opacity:"0"}),t.modal=e,e}();document.body.appendChild(s),r.addEventListener("click",function(){t.isModalOpen?a():i()}),window.addEventListener("message",function(n){"NOVA_AGENT_CLOSE"===n.data&&a()}),document.addEventListener("click",function(n){t.isModalOpen&&!t.modal.contains(n.target)&&t.bubble.contains(n.target)})}window.NovaAgentWidget={open:i,close:a,toggle:function(){t.isModalOpen?a():i()},isAuthorized:function(){return t.isAuthorized},isOpen:function(){return t.isModalOpen}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r(),function(){function n(){t.modal&&(768>window.innerWidth?(o(t.modal,{right:"12px",bottom:"84px",width:Math.min(420,window.innerWidth-24)+"px",height:Math.min(640,window.innerHeight-100)+"px"}),o(t.bubble,{right:"12px",bottom:"12px"})):(o(t.modal,{right:"24px",bottom:"96px",width:"420px",height:"640px"}),o(t.bubble,{right:"24px",bottom:"24px"})))}n(),window.addEventListener("resize",n)}()}();